# ⁡⁢⁣⁣Используем Node.js для React⁡
FROM node:23-slim AS build

# ⁡⁢⁣⁣Устанавливаем рабочую директорию⁡
WORKDIR /app

# ⁡⁢⁣⁣Копируем package.json и устанавливаем зависимости⁡
COPY package.json ./
RUN npm install

# ⁡⁢⁣⁣Копируем весь исходный код⁡
COPY . .

# ⁡⁢⁣⁣Собираем фронт (vite/react-scripts — всё равно, билд будет в dist или build)⁡
RUN npm run build

# ⁡⁢⁣⁣Используем nginx для отдачи статики⁡
FROM nginx:alpine

# ⁡⁢⁣⁣Копируем собранный build в директорию, где NGINX ищет HTML-файлы⁡
COPY --from=build /app/build /usr/share/nginx/html

# ⁡⁢⁣⁣Копируем наш кастомный конфиг nginx⁡
COPY nginx.conf /etc/nginx/conf.d/default.conf

# ⁡⁢⁣⁣Открываем порт 80⁡
EXPOSE 80

# ⁡⁢⁣⁣П⁡⁢⁣⁣о умолчанию nginx будет стартовать сам⁡